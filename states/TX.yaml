steps:
  - id: portal_login
    lane: state_portal
    type: action
    label: "Log in to TX Portal"
    action: browser.goto
    url: "https://sltx.smart.filing/login"

  - id: enter_creds
    lane: state_portal
    type: action
    label: "Enter creds"
    action: browser.fill
    selectors:
      username: "#user"
      password: "#pass"
      submit:   "button[type=submit]"
    inputs:
      username: "${secrets.TX_USERNAME}"
      password: "${secrets.TX_PASSWORD}"
    next: check_login

  - id: check_login
    lane: state_portal
    type: decision
    label: "Authenticated?"
    check: browser.exists
    selector: "nav .dashboard"
    yes_to: start_filing
    no_to: login_error
