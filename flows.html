<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>State Flow</title>
  <script src="https://cdn.jsdelivr.net/npm/js-yaml@4/dist/js-yaml.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mermaid@9.4.3/dist/mermaid.min.js"></script>
  <style>
    body { font-family: Tahoma, Arial, sans-serif; margin: 16px; background: #fafafa }
    #chart .mermaid { white-space: pre }
    pre { background: #f6f6f6; padding: 10px; border-radius: 8px }
  </style>
</head>
<body>
<h1 id="title">State Flow</h1>
<div>Source: <span id="src"></span></div>
<div id="chart"><div id="m" class="mermaid">flowchart TB
    open_connect[Open InsCipher Connect]
    start_filing[Start New Filing - select TX]
    portal_login[Log in to TX Portal]
    address_check{Address mismatch?}
    fix_address[Fix address in Connect - update and save]
    upload_docs[Upload Required Docs - package, attachments]
    submit_filing[Submit Filing]
    receipt_check{Receipt downloaded?}
    retry_download[Retry download - or open in new tab]
    archive_receipt[Archive receipt in Connect - link to record]
    open_connect --> start_filing
    start_filing --> portal_login
    portal_login --> address_check
    address_check -- Yes --> fix_address
    address_check -- No --> upload_docs
    fix_address --> portal_login
    upload_docs --> submit_filing
    submit_filing --> receipt_check
    receipt_check -- Yes --> archive_receipt
    receipt_check -- No --> retry_download
    retry_download --> receipt_check
</div>
<script>
  mermaid.initialize({ startOnLoad:true, theme:'default' });
</script>
</body>
</html>
